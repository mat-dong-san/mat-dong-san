-- 계정
CREATE USER MDS IDENTIFIED BY MDS;
GRANT CONNECT, RESOURCE TO MDS;


-- 테이블
CREATE TABLE PRODUCT(
    P_ID NUMBER PRIMARY KEY,
    P_ADDR VARCHAR2(400),
    P_COORD VARCHAR2(100) DEFAULT '0/0',
    P_C_LAT VARCHAR2(100) DEFAULT '0',
    P_C_LNG VARCHAR2(100) DEFAULT '0',
    P_FIELD VARCHAR2(100),
    P_FLOOR VARCHAR2(100),
    P_SIZE VARCHAR2(100),
    P_STR VARCHAR2(100),
    P_KIND VARCHAR2(100),
    P_ROOM VARCHAR2(100),
    P_S_SIZE VARCHAR2(100),
    P_D_SIZE VARCHAR2(100),
    P_LAYER VARCHAR2(100),
    P_DEAL VARCHAR2(100),
    P_CHARTER VARCHAR2(100) DEFAULT '0',
    P_RENT VARCHAR2(100) DEFAULT '0',
    P_DEPOSIT VARCHAR2(100) DEFAULT '0',
    P_COST VARCHAR2(100) DEFAULT '0',
    P_COST_ITEM VARCHAR2(500),
    P_EN_D DATE,
    P_CONTENT VARCHAR2(500),
    P_HEAT VARCHAR2(100),
    P_DIR VARCHAR2(100),
    P_PARK VARCHAR2(100),
    P_ELEVATOR VARCHAR2(100),
    P_VERANDAR VARCHAR2(100),
    P_PET VARCHAR2(100),
    P_BUILT_IN VARCHAR2(100),
    P_LOAN VARCHAR2(100),
    P_OPTION VARCHAR2(200),
    P_PICTURE VARCHAR2(100),
    P_REG_D DATE DEFAULT SYSDATE,
    P_REG_STATUS VARCHAR2(1) DEFAULT 'N',
    P_DEL_YN VARCHAR2(1) DEFAULT 'N',
    US_ID VARCHAR2(100) NOT NULL
);

CREATE TABLE MEMBER (
	US_ID	VARCHAR2(100)	NOT NULL,
	US_PWD	VARCHAR2(200)	NOT NULL,
	US_NAME	VARCHAR2(100)	NOT NULL,
	US_SSN	VARCHAR2(100)	NOT NULL,
	US_PHONE	VARCHAR2(100)	NOT NULL,
	US_EMAIL	VARCHAR2(100)	NOT NULL,
	US_ADDR	VARCHAR2(400)	NOT NULL,
	US_TYPE	VARCHAR2(100)	NOT NULL,
	US_REG_D	DATE	NOT NULL,
	US_KAKAO	VARCHAR2(5)	DEFAULT 'N' NOT NULL,
	US_DEL_YN	VARCHAR2(5)	DEFAULT 'N' NOT NULL
);

CREATE TABLE ESTATEAGENT_REVIEW (
	ER_ID	NUMBER	NOT NULL,
	ER_CONTENT	VARCHAR2(500) NOT NULL,
	ER_POINT	NUMBER	DEFAULT 0 NOT NULL,
	ER_REG_D	DATE DEFAULT SYSDATE NOT NULL,
	ER_DEL_YN	VARCHAR2(1)	DEFAULT 'N' NOT NULL,
	US_ID	VARCHAR2(100) NOT NULL,
	E_ID	NUMBER	NOT NULL
);

CREATE TABLE ESTATEAGENT (
	E_ID	NUMBER	NOT NULL,
	E_NAME	VARCHAR2(100)	NOT NULL,
	E_PHONE	VARCHAR2(100)	NOT NULL,
	E_CONTENT	VARCHAR2(1000)	NOT NULL,
	E_ADDR	VARCHAR2(100)	NOT NULL,
	E_PICTURE	VARCHAR2(100)	NOT NULL,
	E_FIELD	VARCHAR2(100)	NOT NULL,
	E_REG_NUM	VARCHAR2(100)	NOT NULL,
	E_COORD	VARCHAR2(100)	DEFAULT 0 NOT NULL,
	E_C_LAT	VARCHAR2(100)	DEFAULT 0 NOT NULL,
	E_C_LNG	VARCHAR2(100)	DEFAULT 0 NOT NULL,
	E_POINT	VARCHAR2(30)	DEFAULT 0 NOT NULL,
	E_REG_D	DATE	DEFAULT SYSDATE NOT NULL,
	E_DEL_YN	VARCHAR2(1)	DEFAULT 'N' NOT NULL,
	US_ID	VARCHAR2(100)	NOT NULL
);

CREATE TABLE USER_NOTE (
	UN_ID	NUMBER	NOT NULL,
	UN_CONTENT	VARCHAR2(500)	NOT NULL,
	UN_SEND_D	DATE DEFAULT SYSDATE NOT NULL,
	UN_DEL_YN	VARCHAR2(1)	DEFAULT 'N' NOT NULL,
	P_ID	NUMBER	NOT NULL,
	PR_ID	NUMBER	NOT NULL,
	E_ID	NUMBER	NOT NULL	
);

CREATE TABLE FACILITY (
	F_ID	NUMBER	NOT NULL,
	F_COORD	VARCHAR2(100)	NOT NULL,
	F_C_LAT	VARCHAR2(100)	NOT NULL,
	F_C_LNG	VARCHAR2(100)	NOT NULL,
	F_NAME	VARCHAR2(100)	NOT NULL,
	F_ADDR	VARCHAR2(100)	NOT NULL,
	F_TYPE	VARCHAR2(100)	NOT NULL
);

CREATE TABLE FLOW_POPULATION (
	FP_ID	NUMBER	NOT NULL,
	FP_REGION	VARCHAR2(100)	NOT NULL,
	FP_NUM	VARCHAR2(100)	NOT NULL
);

CREATE TABLE PRODUCT_ROOM (
	PR_ID	NUMBER	NOT NULL,
	PR_ROOM	VARCHAR2(100)	NOT NULL,
	PR_TITLE	VARCHAR2(100)	NOT NULL,
	PR_CONTENT	VARCHAR2(500)	NOT NULL,
	PR_DEP	VARCHAR2(100)	NOT NULL,
	PR_D_COST	VARCHAR2(100)	NOT NULL,
	PR_PICTURE	VARCHAR2(100)	NOT NULL,
	PR_REG_D	DATE	DEFAULT SYSDATE NOT NULL,
	PR_REG_STATUS	VARCHAR2(1)	DEFAULT 'N' NOT NULL,
	PR_DEL_YN	VARCHAR2(1)	DEFAULT 'N' NOT NULL,
	PR_OPTION	VARCHAR2(100)	NOT NULL,
	PR_PET	VARCHAR2(100)	NOT NULL,
	PR_PARK	VARCHAR2(100)	NOT NULL,
	PR_ADDR	VARCHAR2(100)	NOT NULL,
	PR_COORD	VARCHAR2(100)	DEFAULT 0 NOT NULL,
	PR_C_LAT	VARCHAR2(100)	DEFAULT 0 NOT NULL,
	PR_C_LNG	VARCHAR2(100)	DEFAULT 0 NOT NULL,
	US_ID	VARCHAR2(100)	NOT NULL
);

CREATE TABLE PRODUCT_APPLICATION (
	A_ID	NUMBER	NOT NULL,
	A_STATUS	VARCHAR2(1)	DEFAULT 'W' NOT NULL,
	A_DATE	DATE	DEFAULT SYSDATE NOT NULL,
	P_ID	NUMBER NULL,
	PR_ID	NUMBER NULL,
	E_ID	NUMBER NULL
);

CREATE TABLE BOARD (
	B_ID	NUMBER	NOT NULL,
	B_TITLE	VARCHAR2(100)	NOT NULL,
	B_CONTENT	VARCHAR2(500)	NOT NULL,
	B_TYPE	VARCHAR2(100)	NOT NULL,
	B_REG_D	DATE	DEFAULT SYSDATE NOT NULL,
	B_DEL_YN	VARCHAR2(1)	DEFAULT 'N' NOT NULL,
	US_ID	VARCHAR2(100)	NOT NULL
);

CREATE TABLE BOARD_ATTACHMENT (
	BA_ID	NUMBER	NOT NULL,
	BA_OR_NAME	VARCHAR2(100)	NOT NULL,
	BA_CH_NAME	VARCHAR2(100)	NOT NULL,
	BA_UP_D	DATE	DEFAULT SYSDATE NOT NULL,
	BA_DEL_YN	VARCHAR2(1)	DEFAULT 'N' NOT NULL,
	BA_TYPE	VARCHAR2(100)	NOT NULL,
	B_ID	NUMBER	NOT NULL
);

CREATE TABLE BOARD_COMMENT (
	BC_ID	NUMBER	NOT NULL,
	BC_CONTENT	VARCHAR2(500)	NOT NULL,
	BC_REG_D	DATE	NOT NULL,
	US_ID	VARCHAR2(100)	NOT NULL,
	B_ID	NUMBER	NOT NULL
);

CREATE TABLE FLOW_POPULATION_YEAR (
	FP_ID	NUMBER	NOT NULL,
	FPY_NUM	VARCHAR2(100)	NOT NULL,
	FPY_YEAR	VARCHAR2(100)	NOT NULL
);

CREATE TABLE REPORT (
	R_ID	NUMBER	NOT NULL,
	R_TAR_KIND	VARCHAR2(100)	NOT NULL,
	R_KIND	VARCHAR2(100)	NOT NULL,
	R_CONTENT	VARCHAR2(500)	NOT NULL,
	R_DATE	DATE	NOT NULL,
	US_ID	VARCHAR2(100)	NOT NULL
);

CREATE TABLE REPORT_TARGET (
	R_ID	NUMBER	NOT NULL,
	US_ID	VARCHAR2(100)	NOT NULL,
	P_ID	NUMBER	NOT NULL,
	PR_ID	NUMBER	NOT NULL,
	BC_ID	NUMBER	NOT NULL,
	E_ID	NUMBER	NOT NULL,
	RT_DEL_YN	VARCHAR2(1)	DEFAULT 'N' NOT NULL
);

ALTER TABLE MEMBER ADD CONSTRAINT PK_MEMBER PRIMARY KEY (
	US_ID
);

ALTER TABLE ESTATEAGENT ADD CONSTRAINT PK_ESTATEAGENT PRIMARY KEY (
	E_ID
);

ALTER TABLE USER_NOTE ADD CONSTRAINT PK_USER_NOTE PRIMARY KEY (
	UN_ID
);

ALTER TABLE FACILITY ADD CONSTRAINT PK_FACILITY PRIMARY KEY (
	F_ID
);

ALTER TABLE FLOW_POPULATION ADD CONSTRAINT PK_FLOW_POPULATION PRIMARY KEY (
	FP_ID
);

ALTER TABLE PRODUCT_ROOM ADD CONSTRAINT PK_PRODUCT_ROOM PRIMARY KEY (
	PR_ID
);

ALTER TABLE PRODUCT_APPLICATION ADD CONSTRAINT PK_PRODUCT_APPLICATION PRIMARY KEY (
	A_ID
);

ALTER TABLE BOARD ADD CONSTRAINT PK_BOARD PRIMARY KEY (
	B_ID
);

ALTER TABLE BOARD_ATTACHMENT ADD CONSTRAINT PK_BOARD_ATTACHMENT PRIMARY KEY (
	BA_ID
);

ALTER TABLE BOARD_COMMENT ADD CONSTRAINT PK_BOARD_COMMENT PRIMARY KEY (
	BC_ID
);

ALTER TABLE FLOW_POPULATION_YEAR ADD CONSTRAINT PK_FLOW_POPULATION_YEAR PRIMARY KEY (
	FP_ID
);

ALTER TABLE REPORT ADD CONSTRAINT PK_REPORT PRIMARY KEY (
	R_ID
);

ALTER TABLE REPORT_TARGET ADD CONSTRAINT PK_REPORT_TARGET PRIMARY KEY (
	R_ID
);

ALTER TABLE FLOW_POPULATION_YEAR ADD CONSTRAINT FK_F_PO_TO_F_PO_YEAR_1 FOREIGN KEY (
	FP_ID
)
REFERENCES FLOW_POPULATION (
	FP_ID
);

ALTER TABLE REPORT_TARGET ADD CONSTRAINT FK_REPO_TO_REPO_TARGET FOREIGN KEY (
	R_ID
)
REFERENCES REPORT (
	R_ID
);

ALTER TABLE PRODUCT_APPLICATION
ADD CONSTRAINT FK_PA_P_ID
  FOREIGN KEY (P_ID)
  REFERENCES PRODUCT(P_ID);


ALTER TABLE PRODUCT_APPLICATION 
ADD CONSTRAINT FK_PA_PR_ID
  FOREIGN KEY (PR_ID)
  REFERENCES PRODUCT_ROOM(PR_ID);


ALTER TABLE PRODUCT_APPLICATION
ADD CONSTRAINT FK_PA_E_ID
  FOREIGN KEY (E_ID)
  REFERENCES ESTATEAGENT(E_ID);

CREATE SEQUENCE SEQ_P_ID;


CREATE SEQUENCE SEQ_E_ID;


CREATE SEQUENCE SEQ_A_ID;